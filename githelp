#!/usr/bin/env ruby
# coding: utf-8

require 're_expand'
require 'json'

require './lib/files'

pat = " #{ARGV.join(' ')} "

g = ExpandRuby::Generator.new # re_expandのジェネレータ

entries = []
Dir.open('./data').each { |file|
  next unless File.file?("./data/#{file}")
  next if file =~ /~$/
  entries += eval File.read("./data/#{file}")
}

entries.each { |entry|
  g.add entry[0], entry[1]
}

res = g.generate pat
res[0].each_with_index { |a,i| # ambig 0
  puts "[#{i}] #{a[0]}"
  puts a[1]
}

